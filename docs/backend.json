{
  "entities": {
    "Trainer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Trainer",
      "type": "object",
      "description": "Represents a trainer associated with an appointment",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the trainer."
        },
        "firstName": {
          "type": "string",
          "description": "First name of the trainer."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the trainer."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/trainers/{trainerId}",
        "definition": {
          "entityName": "Trainer",
          "schema": {
            "$ref": "#/backend/entities/Trainer"
          },
          "description": "Stores information about trainers. Publicly accessible.",
          "params": [
            {
              "name": "trainerId",
              "description": "The unique ID of the trainer."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to support the Mail Pilot application's requirements, focusing on secure data access, scalability, and ease of debugging. The primary goal is to facilitate the efficient import of Excel data, personalized email composition, and email sending, all while maintaining a clear and secure authorization model.\n\n**Authorization Independence:** The structure prioritizes authorization independence to enable atomic operations and simplify security rules.  This is primarily achieved through path-based ownership for Recipients and their associated data (Appointments, EmailLogs).\n\n**Structural Segregation:** Data with different access requirements is segregated into separate collections, simplifying security rules and ensuring that each collection has a homogeneous security posture.  For example, recipient-specific data is stored under the `/users/{userId}` path.\n\n**Access Modeling:**\n*   **Private User Data:** Uses path-based ownership for user-related data. Recipients and their related Appointments and EmailLogs are stored under `/users/{userId}`, making security rules straightforward. The system relies solely on `request.auth.uid`.\n*   **QAPs (Rules Are Not Filters):** The structure enables secure `list` operations by using path-based ownership. Listing recipients, appointments, or email logs can be done securely by scoping the query to the current user's path (`/users/{userId}`).\n\n**Data Clarity and Predictability:** The structure enforces clear naming conventions and explicit state modeling to improve debuggability and maintainability. Field names are semantic, and wildcards are descriptive."
  }
}
